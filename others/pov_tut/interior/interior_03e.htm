<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
<title>Design of the Interior of transparent Shapes with POV-Ray</title>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
<meta http-equiv="language" content="en-us">
<meta name="robots" content="index">
<meta name="robots" content="follow">
<meta name="Author" content="Friedrich A. Lohmueller">
<meta name="copyright" content="Copyright 2014, Friedrich A. Lohmueller - all rights reserved worldwide">
<meta name="description" content=">Design of the interior of transparent shapes with POV-Ray">
<meta name="keywords" content="POV, POVRAY, POV-Ray, povray, raytracing, 3D computer graphics, textures, transparent shapes, interior, material, media">
<link rel="stylesheet" type="text/css" href="../lo1style.css">
<SCRIPT LANGUAGE=JavaScript>
<!--
function ShowImage(ImageHtml) {
 New=window.open(ImageHtml, "PictureWin", "status=0,scrollbars=0,resizable=1,width=690,height=545");
 New.focus();  }
//-->
</SCRIPT>
</head>

<body bgcolor="#d8d8d0" text="#505030" link="#006677" vlink="#445566" alink="#cc0055">

<a name="top"></a>
<table width="100%" border="0"><tr>
 <td valign="top"><h6><nobr>Descriptions and Examples for the POV-Ray Raytracer </nobr>
                  <nobr>by Friedrich A. Lohm&uuml;ller</nobr>
 <hr size="3" width="95%" align="left">
 <div align="center">
      <font size="5"> <b>Design of the Interior of transparent Shapes</b></font>
      <font size="-1"><b> in POV-Ray</b</font></div>
 </td></h6>
 </td>
 <td align="right">
        <a href="interior_03i.htm"><font size="2">Italiano</font></a>
        <a href="interior_03i.htm"><img src="flag_ita.gif" alt="Italiano" title="Italiano"align="bottom" width="22" height="15" border="0"></a><br>
        <a href="interior_03f.htm"><font size="2">Fran&ccedil;ais</font></a>
        <a href="interior_03f.htm"><img src="flag_fra.gif" alt="fran&ccedil;ais" title="fran&ccedil;ais"align="bottom" width="22" height="15" border="0"></a><br>
        <a href="interior_03d.htm"><font size="2">Deutsch </font></a>
        <a href="interior_03d.htm"><img src="flag_ger.gif" border="0" width="22" height="15" alt="Deutsch" titel="Deutsch"></a><br>
    </td>
</tr></table>
<a name="start"></a>
<hr size="3">
<table border="0" width="100%" cellspacing="5">  <!--- global table -->
<tr><td valign="top"> <!-- Index -->
<font size="2">
 <a href="../../index.htm">Home</b></a><br>
 - <a href="../pov__eng.htm"><nobr>POV-Ray Tutorial</nobr></b></a><br>
<br>
 &nbsp; <a href="interior_000e.htm">Content Overview</b></a><br>
 &nbsp; <a href="interior_000e.htm">material, interior, media</b></a><br>
<br>
&nbsp; -  <a href="interior_05e.htm">Syntax material</b></a><br>
 &nbsp; &nbsp; &nbsp; texture + interior <br>
&nbsp; -  <!--a href="interior_03e.htm"--><b>Window Glass</b></a><br>
 &nbsp; &nbsp; &nbsp;<b> + max_trace_level</b> <br>
&nbsp; -  <a href="interior_001e.htm">Fog, Mist or Haze</b></a><br>
&nbsp; Media</b></a> <br>
&nbsp; -  <a href="interior_10e.htm">Syntax Media</b></a> <br>
&nbsp; -  <a href="interior_30e.htm">Media+Density Maps</b></a> <br>
&nbsp; Atmospheric Media</b></a> <br>
&nbsp; &nbsp; with/without density map <br>
&nbsp; -  <a href="interior_20e.htm">Beames in the Fog</b></a> <br>
&nbsp; Object Media</b></a> <br>
&nbsp; Emitting Media</b></a> <br>
&nbsp; -   <a href="interior_40e.htm">Light Sword</b></a> <br>
&nbsp; -   <a href="interior_44e.htm">Candle Flames</b></a> <br>
&nbsp; Scattering Media</b></a> <br>
&nbsp; -   <a href="interior_50e.htm">Light through Window</b></a><br>
&nbsp; -   <a href="interior_70e.htm">Steam, Smoke, Clouds</b></a> <br>
&nbsp; Absorbing Media</b></a> <br>
&nbsp; -   <a href="interior_60e.htm">Dust Devils</b></a> <br>

<nobr>&nbsp; Special Problems with Media</b></a></nobr><br>
&nbsp; -  <a href="interior_080e.htm">Scaling of Media</b></a> <br>
&nbsp; -  <a href="interior_090e.htm">Overlapping Media</b></a> <br>

<nobr> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
       &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  </nobr>
 </font>

</td><td valign="top" rowspan="2"> <!-- Content -->
<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
<table border="0" width="90%" align="center"><tr><td>           <!-- inner table -->

<h1 align="center"><a name="Top"></a><b>Window Glass and max_trace_level<br></b>
</h1>

<p align="justify"><b>Window glass without IOR:</b>
As Glass for windows we should not use &quot;real&quot; glass
with definied index of refraction (&quot;ior&quot;).
At the refraction in thin layers with parallel surfaces
we have only a very small parallel movement of the through falling light
which we hardly can notice. <br>
This parallel movement of the through falling light we only can notice
at extrem thick pane of glass and only
with very flat angles of view - for all &quot;normal&quot; panes of glass
the caculation of the &quot;correct&quot; way of the light
considering the IOR does not make any visible effect.<br>
This is why for windows we should use a more simpler
transparent glass texture without any &quot;interior&quot;.

</p>
<table width="80%" align="center">
<tr>
 <td align="center">
   <table border="2" cellspacing="0" cellpadding="0" bgcolor="#fbfaf9"
     bordercolor="#C0C0C0" bordercolorlight="#FFFFFF" bordercolordark="#808080">
    <tr><td><img src="im/windowglass_a.jpg" width="240"  height="200"  vspace="0" hspace="0"></td>
    </tr></table>
     <font size="-1"><nobr><b>Refraction at thick layers</b></nobr></font>
 </td>
 <td align="center">
    <table border="2" cellspacing="0" cellpadding="0" bgcolor="#fbfaf9"
     bordercolor="#C0C0C0" bordercolorlight="#FFFFFF" bordercolordark="#808080">
    <tr><td><img src="im/windowglass_b.jpg" width="200"  height="200"  vspace="0" hspace="0"></td>
    </tr></table>
     <font size="-1"><nobr><b>Refraction at thin layers</b></nobr></font>
</td>
</tr>
</table>
<br>
 Sample for a <b>simple and fast glass texture:</b><br>&nbsp;

<div align="center">
<table align="center" border="1" cellspacing="2" cellpadding="4" bgcolor="#fbfaf9"
     bordercolor="#C0C0C0" bordercolorlight="#FFFFFF" bordercolordark="#808080">
 <tr>
  <td align="center">
    <table border="1" cellspacing="0" cellpadding="0" bgcolor="#fbfaf9"
     bordercolor="#C0C0C0" bordercolorlight="#FFFFFF" bordercolordark="#808080">
    <tr><td><img src="im/window_00.jpg" width="240"  height="240"  vspace="0" hspace="0"></td>
    </tr></table>
 </td>
 <td>
  <pre>#declare Window_Glass =
texture{
  pigment{ rgbf&lt;0.98,0.98,0.98,0.8&gt;}
  finish { diffuse 0.1
           reflection 0.2
           specular 0.8
           roughness 0.0003
           phong 1
           phong_size 400}
  } // end of texture --------------</b></td></pre>

  <td align="center">
    <table border="1" cellspacing="0" cellpadding="0" bgcolor="#fbfaf9"
     bordercolor="#C0C0C0" bordercolorlight="#FFFFFF" bordercolordark="#808080">
    <tr><td><img src="im/frame_00.jpg" width="240"  height="240"  vspace="0" hspace="0"></td>
    </tr></table>
</td>
</tr></table>



 <p align="justify"><b>max_trace_level: </b>The meaning of the keyword &quot;max_trace_level&quot;
 is easyly to recognize by the following effect:
 By using transparent textures and materials we sometimes unexpectedly can
 <b>&quot;look some dark side of things&quot;</b> - some parts of glass surfaces are gone black!<br>

At a surface of glass the raytracer calculates the through passing of 2 interfaces. At 2 panes
one behind the other we have already 4 interfaces.
If there are located more than 2 panes of glass one behind each other somewhere in our scene,
so POV-Ray by default will stop calculating the tracing of the rays
after the 5th interface (this means inside the 3rd pane!),
because in general the surfaces more behind do not make any relevant contribution to the total brightness.<br>
The according effect will take place by multiple reflection at mirror surfaces.<br>

The threshold of the number if interfaces where the tracing of rays will stop is defined by the keyword
&quot;max_trace_level&quot;. It's default value is 5, it can be set up to a maximum of 256..
<br>
There are many cases where this is not enough, than at these parts we see gray or nearly total black surfaces! </p>
<table width="80%" align="center">
<tr>
 <td align="center">
   <table border="1" cellspacing="0" cellpadding="0" bgcolor="#fbfaf9"
     bordercolor="#C0C0C0" bordercolorlight="#FFFFFF" bordercolordark="#808080">
    <tr><td><img src="im/windowglass_o.jpg" width="256"  height="256"  vspace="0" hspace="0"></td>
    </tr></table>
     <font size="-1"><nobr><b>global_settings{ max_trace_level 5 }</b></nobr></font>
 </td>
 <td align="center">
    <table border="1" cellspacing="0" cellpadding="0" bgcolor="#fbfaf9"
     bordercolor="#C0C0C0" bordercolorlight="#FFFFFF" bordercolordark="#808080">
    <tr><td><img src="im/windowglass_w.jpg" width="256"  height="256"  vspace="0" hspace="0"></td>
    </tr></table>
     <font size="-1"><nobr><b>global_settings{ max_trace_level 17 }</b></nobr></font>
</td>
</tr>
</table>
<p align="justify"><b>Remedy against dark spots: </b>To avoid these dark spots we should encrease
somewhere at the to of our scene file the max_trace_level by i.e. the following line:</font>
 <nobr><pre><b>global_settings{ max_trace_level 20 }</b></pre></nobr>  <br>
<p align="justify"><b>Attention:</b><font size="-1"> Don't overdo!
 Don't use unnecessarily high values, because each additional interface have as a consequence
 an additional calculation of rays for each point,
 provided that the interfaces before were transparent at least a little bit! <br>
(The right image neads a 4 times longer time for caclculation then the left!)
 <br></font>&nbsp;<br>
<b>Test renderings in &quot;QUICK&quot; mode: </b><br>
If for test rendering we have choosen a resolution like i.e.
<nobr><font size="-1">&quot;320x240, <b>quick</b>, mosaic&quot; </font></nobr>
 glass surfaces are only shown in black or in the defined &quot;quick_color&quot;!
Transparency or filter are not calculated in this mode!   <br>
 </p>
</div>



</td></tr>
</table> <!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
                                                                  <!-- end of inner table -->

</td></tr>
<tr><td valign="middle" align="center"><a href="#top">top</a>
</td></tr></table> <!-- end of global table -->
</div>
<!-- footer -->
<hr size="3">
<table width="95%" align="center"><tr>
<td>
<i><font size="-1">&copy; Friedrich A. Lohm&uuml;ller, 2014<br>
    <a href="http://www.f-lohmueller.de"><nobr>http://www.f-lohmueller.de</nobr></i></a>
 <!-- COUNTERSTART -->
 <script language="JavaScript" type="text/javascript" src="../../pphlogger.js"></script>
 <noscript><img alt="" src="http://www.counterbox.de/counter/pphlogger.php?id=flohmuller&st=img"></noscript>
 <!-- COUNTERENDE -->
 </font>
</td>
</tr></table><!-- end footer -->
</body>
</html>
